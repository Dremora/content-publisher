<% content_for :back_link, documents_path %>
<% content_for :title, @document.title || "No title" %>

<p>
  Base path: <%= @document.base_path %>
</p>

<p>
  Document type: <%= @document.document_type %>
</p>

<p>
  Summary: <%= @document.summary %>
</p>

<ul>
<% ContentValidator.new(@document).validation_messages.each do |message| %>
  <li><%= message %></li>
<% end %>
</ul>

<% @document.document_type_schema.contents.each do |schema| %>
  <%= render "documents/fields/#{schema.type}", schema: schema, document: @document %>
<% end %>

<h2>Associations</h2>

<% @document.document_type_schema.associations.each do |field| %>
  <%= render "documents/fields/#{field.type}", name: field.id, label: field.label, value: @document.associations[field.id] %>
<% end %>

<%= render "govuk_publishing_components/components/button", {
  text: "Publish",
  href: publish_document_path(@document),
} %>

<%= link_to "Edit document", edit_document_path(@document), class: "govuk-link" %>
<%= link_to "Edit associations", document_associations_path(@document), class: "govuk-link" %>
